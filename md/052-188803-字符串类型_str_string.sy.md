---
show: step
version: 1.0
enable_checker: true
---

# 帮助手册

## 回忆上次内容

- 上次 直接 修改代码
- 增强 程序的可读性
  - 让变量标识符 具有明确的语义
- 把变量的类型 
	- 明确标记在标识符上
	- 就像
		- 把缩进 作为程序块的分界一样
    	- 明确起来
- 明确了 
	- 静态语言和动态语言
- python 属于
	- 要求没有那么严格的 动态语言
  - 这对于 初学者很友好
  - 无需明白变量 是 怎么存储的
  - 不过很多时候 也容易不明所以
- 想要 真正成为编程高手
  - 不但要 明确 变量的数据类型
  - 而且 要知道 这数据类型 是`怎么`存储的
- 想要 了解数据 具体是怎么存储 的
	- 从 哪种数据类型 开始呢 ？🤔

### 字符串

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220326-1648284483215)

- 字符串英文名称是 string

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220326-1648284462901)

### string
![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210817-1629152683753)

- 意思是绳子或者琴弦
- 后来也指用绳子把什么东西串起来
- 比如什么？

### 手串

- 手串

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210816-1629106333701)

- 这就是一串金刚菩提串的
	- 多少颗金刚菩提呢？
	- 有的长有的短
	- 这一串 108 颗
	- 代表断除一百零八种烦恼
	- 有事没事就盘串
	- 用手盘包了浆
	- 而证得一百零八种无量三昧
	- 三昧就是三摩地
	- 俗称入定
	- 只要静心就都能入定
- 我经常盘我笔记本的键盘
	- 虽然没有包浆
	- 但是也盘出了感情

### 糖葫芦串

- 就是把山楂串起来形成的就是糖葫芦串

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210817-1629152878063)

- 类似的还有烤串
- 字符串

### 字符串

- 字符串就是把字符串起来
	- 字符串里面每个山楂就是一个字符

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210817-1629153196214)

- 怎么理解字符串?

### 字符串

- 字符串就是字符的串
	- 把一个个字符串起来

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220522-1653185493990)

- 那他在内存里面什么样呢？

### 长度

- 我们知道了这个串是
	- 由字符构成的
	- 那这个串有多长呢

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210817-1629166336384)

- `len("oeasy")`

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210817-1629153913038)

- 总共 5 个
- 具体是哪五个呢？🤔

### 下标

- 可以用下标运算符`[]`进行访问
	- 下标是从 0 开始的

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210817-1629166192803)

- 就是这 5 个

### 下标范围

- 下标从 0 开始
- 最后一位是 4
  - 也是 len(o)-1
  - 写成-1 也可以
  - 意思是倒数第一个字符
 
![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210817-1629166428454)


- 如果我想访问 o[5] 呢

### 下标越界

- 访问 o[5] 报错
	- IndexError
	- string index out of range

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210817-1629166470697)

- 字符串索引超出范围
	- 数组下标越界
- 类型和位置

### 类型和位置
- 先自省一下
	- introspection

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210817-1629166523239)

- 通过 type 函数获得 o 的类型
  - 当前的类型是`str`
  - 就是字符串 string

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210817-1629155102907)

- 通过 id 函数获得 o 在内存中的地址
	- 这个地址是一串数字
	- 这数字就是 o 在内存中的唯一标识
	- 是 o 所指向的内存地址

### 初始化过程

- 首先在内存中 id 处(`140547862959216`)
	- 分配处 5 个字节
	- 放上 "oeasy" 5 个字符
- 然后声明一个 str 型的变量 s_title
	- 让 s_title 指向内存中 id 为 `140547862959216` 的空间
		- 这个"oeasy"字符串的在内存里存储的位置

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210828-1630144191964)

- 这5个字符究竟是如何放置的呢的呢？

### ascii 编码

- 字符串中存储的是英文字符
	- 属于ascii 字符 
	- 有七位二进制数
	- 放在内存里面一个字节就可以

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210828-1630144283890)

- 那 5 个字符
	- 分别什么样呢？

### 5 个字符

- id 那个位置
	- 有一个 str 类的对象
	- 内存里面是`\x6f\x65\x61\x73\x79`
	- 总共 5 个字节
	- 分配好内存之后就把上面五个字节写进相应的二进制数据

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210828-1630144360494)

- 如果有回车这类的转义字符呢？

### 回车字符

- 一个转义字符也占据一个字节

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210817-1629168428709)

- 这里面用到了各种数制的转化
	- 我们回忆一下
- 进制转化
	- 从十进制到其他进制
		- 2进制 bin
		- 8进制 oct
		- 16进制 hex
	- 从其他进制到十进制	
		- int
- 编码转化
	- 从字符转化为序号
		- ord
	- 从序号转化为字符	
		- chr
- 字节序列与字符串转化	
	- 字节序列到字符串
		- decode
	- 从字符串到字节序列
		- encode
- 比如 回车字符`\n` 就对应 `b"\x0a"`

### 转义字符

- 转义字符也占据一个字节

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210820-1629426597817)

- 所有转义字符都如此么？

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210820-1629426692349)

- 如果有中文字符呢？

### 中文字符

- str = "a 一"
- 总共两个字符
	- 一个是英文字符
	- 另一个是中文汉字字符
- 对应两个位置
  - str[0] - a
  - str[1] - 一

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210817-1629155376674)

- 其中 a 是 ascii 字符
	- 长度为1
- 一是 utf-8 编码的 unicode 字符
	- 长度也为1
- 具体占用几个字节呢？
- 首先要知道内存中的编码方式
	- 到底是utf-8
	- 还是unicode

### 编码

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220402-1648903114501)

- 查询str的帮助
- 发现默认编码是系统的默认编码

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220402-1648903155887)

- 所以在python3的运行环境下
- str的默认编码就是系统的编码
- 目前就是utf-8

### 内存情况

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210817-1629167528016)

- 可以看到
  - a 就是 `\x61`
  - 一 就是 `\xe4\xb8\x80`

### 用变量赋值

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210817-1629167725483)

- s1 = "oeasy"
  - 这个字符串长度  5 个字节
  - 放上 oeasy
  - 让 s1 指向这 5 个字节的首字母
- s2 = "o2z"
  - 分配了 3 个字节
  - 放上 o2z
  - 让 s2 指向这 3 个字节的首字母
- s2 = s1
  - 让 s2 这个指针指向 s1 所指向的字符串位置
- 最终引用情况
  - 字符串"oeasy" 
	- 有两个变量引用(s1、s2)
  - 字符串 "o2z"
	- 原来 s2 所指向
	- 现在没有变量引用了
	- 会被系统垃圾回收

### 注意事项

- str 可以把数字转化为一个字符串
- str 是类的名字
- 但是一旦被赋值
- 就无法转化了

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210828-1630144514499)

- 这个初学者要特别注意！📢

### 总结

- 这次了解的是字符串
- 字符串有一些要素 
	- 字符串长度 
- 这些字符都可以用下标索引 
- 字符的长度本身有长有短 
	- ascii 包括各种 转义字符 
		- 都对应 1 个字节 
	- unicode 字符中的汉字 
		- 可能对应 3 个字节
- 但不管本身是 1 字节 还是 3 字节 
	- 都算一个字符
- 字符串赋值过程
  - 在内存中 分配一块空间
  - 放上需要的字符串
  - 把字符串在内存的地址
  - 赋给一个字符串变量
  - 这就是字符串变量的id
- 除了字符串还有什么变量类型？🤔
- 下次再说！👋
